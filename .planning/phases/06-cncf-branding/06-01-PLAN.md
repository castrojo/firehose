---
phase: 06-cncf-branding
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/index.astro
  - src/components/InfoBox.astro
  - src/lib/logoMapper.ts
autonomous: true

must_haves:
  truths:
    - "CNCF blue color (#0086FF) is defined and available via CSS variables"
    - "InfoBox component exists and can display titled link sections"
    - "Logo mapper can resolve project names to logo paths with fallback handling"
  artifacts:
    - path: "src/pages/index.astro"
      provides: "CNCF color system via CSS custom properties"
      contains: "--color-cncf-blue: #0086FF"
      min_lines: 5
    - path: "src/components/InfoBox.astro"
      provides: "Reusable sidebar link section component"
      min_lines: 40
    - path: "src/lib/logoMapper.ts"
      provides: "Logo path resolution with edge case handling"
      exports: ["getProjectLogo"]
      min_lines: 20
  key_links:
    - from: "src/pages/index.astro"
      to: "CSS variables"
      via: ":root definitions"
      pattern: "--color-cncf-"
    - from: "src/lib/logoMapper.ts"
      to: "public/logos/"
      via: "path construction"
      pattern: "/logos/.*/icon-color\\.svg"
---

<objective>
Establish CNCF branding infrastructure by defining official color system, creating reusable InfoBox component for sidebar links, and implementing logo path resolution logic.

Purpose: Provides foundational branding elements that will be integrated in Plan 06-02. This plan creates the building blocks (colors, components, utilities) without visual integration, keeping each plan focused and under 50% context.

Output: Three new/modified files providing CNCF color variables, InfoBox component, and logo mapper utility.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-cncf-branding/06-RESEARCH.md
@src/pages/index.astro
@src/components/ReleaseCard.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CNCF Color System to CSS Variables</name>
  <files>src/pages/index.astro</files>
  <action>
Add CNCF official brand colors as CSS custom properties in the existing :root section of src/pages/index.astro.

**Colors to add** (from research, official CNCF brand guidelines):
- --color-cncf-blue: #0086FF (primary brand color)
- --color-cncf-black: #000000
- --color-cncf-turquoise: #93EAFF
- --color-cncf-pink: #D62293
- --color-cncf-stone: #E5E5E5
- --color-cncf-white: #FFFFFF

**Map CNCF blue to existing variables** to propagate throughout site:
- --color-accent-emphasis: var(--color-cncf-blue)
- --color-text-link: var(--color-cncf-blue)

Add these after the existing GitHub Primer color variables, with a comment block identifying them as CNCF brand colors.

**Do NOT** remove existing color variables. CNCF colors augment, not replace, the GitHub Primer foundation.
  </action>
  <verify>
```bash
# Check that CNCF colors are defined
grep -E "(--color-cncf-blue|--color-cncf-black|--color-cncf-turquoise)" src/pages/index.astro

# Verify blue is mapped to accent/link colors
grep -E "(--color-accent-emphasis.*color-cncf-blue|--color-text-link.*color-cncf-blue)" src/pages/index.astro
```
  </verify>
  <done>
CNCF brand colors are defined as CSS custom properties in :root, CNCF blue is mapped to accent and link colors, existing GitHub Primer variables remain intact.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create InfoBox Component for Sidebar Links</name>
  <files>src/components/InfoBox.astro</files>
  <action>
Create a new Astro component at src/components/InfoBox.astro that displays a titled section with a list of links.

**Component structure** (from research Pattern 3):
- Props interface: `{ title: string; description?: string; links: Link[] }`
- Link interface: `{ text: string; url: string; external?: boolean }`
- Render: Heading + optional description + list of links
- External links get target="_blank" and rel="noopener noreferrer"
- External links show external icon (SVG arrow) for visual affordance

**Styling** (match existing sidebar pattern from Stats):
- Box: white background, border, 6px radius, 1.5rem padding
- Heading: 1rem, 600 weight, bottom border separator
- Links: CNCF blue color (var(--color-cncf-blue)), no underline, hover underline
- Font size: 0.875rem for links
- Gap: 0.75rem between links

**Responsive**:
- Mobile (max-width: 480px): Reduce padding to 1rem

**Accessibility**:
- External icon has aria-label="Opens in new tab"
- Semantic HTML: h2 for heading, ul for links

Use the complete example from research (06-RESEARCH.md "InfoBox Component Implementation") as reference.
  </action>
  <verify>
```bash
# Check component exists with correct structure
test -f src/components/InfoBox.astro && echo "InfoBox component created"

# Verify Props interface and external link handling
grep -E "(interface Props|interface Link|external.*_blank)" src/components/InfoBox.astro

# Check CNCF blue usage
grep "color-cncf-blue" src/components/InfoBox.astro
```
  </verify>
  <done>
InfoBox component exists, accepts title/description/links props, styles links with CNCF blue, handles external links with icon, matches sidebar styling patterns.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Logo Mapper Library</name>
  <files>src/lib/logoMapper.ts</files>
  <action>
Create src/lib/logoMapper.ts with a function that maps project names to logo paths in /public/logos.

**Core function** (from research "Logo Loading with Fallback"):
```typescript
export function getProjectLogo(projectName: string | undefined): string
```

**Logic**:
1. If projectName is undefined/empty, return '/logos/placeholder.svg'
2. Normalize project name: lowercase, spaces to hyphens, remove parentheses and dots
3. Apply edge case mappings for known mismatches (e.g., 'in-toto' → 'in-toto', 'open-policy-agent' → 'opa', 'the-update-framework' → 'tuf')
4. Return path: `/logos/${logoDir}/icon-color.svg`

**Edge cases to include** (from research + Firehose feeds):
- 'open-policy-agent' → 'opa'
- 'the-update-framework' → 'tuf'
- Add others as discovered during logo download (e.g., projects with special characters)

**TypeScript**: Use proper types, export function for use in ReleaseCard.

Reference the complete implementation from research (06-RESEARCH.md "Logo Loading with Fallback").
  </action>
  <verify>
```bash
# Check file exists and exports function
test -f src/lib/logoMapper.ts && echo "Logo mapper created"

# Verify function signature and edge cases
grep -E "(export function getProjectLogo|specialCases|open-policy-agent|opa)" src/lib/logoMapper.ts

# Check TypeScript types
grep "string" src/lib/logoMapper.ts
```
  </verify>
  <done>
logoMapper.ts exists, exports getProjectLogo function, handles undefined projectName, normalizes names correctly, includes edge case mappings for known projects, returns icon-color.svg paths.
  </done>
</task>

</tasks>

<verification>
**Build verification:**
```bash
npm run build
```
Should succeed with no TypeScript errors.

**File existence:**
- src/pages/index.astro contains --color-cncf-blue definitions
- src/components/InfoBox.astro exists and is valid Astro component
- src/lib/logoMapper.ts exists and exports getProjectLogo

**No visual changes yet** - This plan only creates infrastructure. Visual integration happens in Plan 06-02.
</verification>

<success_criteria>
- [ ] CNCF colors defined in CSS custom properties (:root in index.astro)
- [ ] CNCF blue mapped to --color-accent-emphasis and --color-text-link
- [ ] InfoBox component created with Props interface and external link handling
- [ ] InfoBox uses CNCF blue for link colors
- [ ] logoMapper.ts exports getProjectLogo function
- [ ] Logo mapper handles edge cases (OPA, TUF, in-toto)
- [ ] Build succeeds with no TypeScript or Astro errors
- [ ] All files formatted and linted correctly
</success_criteria>

<output>
After completion, create `.planning/phases/06-cncf-branding/06-01-SUMMARY.md`
</output>
