---
// KubeCon Event Banner component
// Displays upcoming CNCF events with theme-aware banner images
// 
// Uses official CNCF banner system with:
// - 500x500px square format (not 2400x300 rectangle)
// - Light and dark theme variants
// - Automatic rotation managed by CNCF

interface Props {
  name: string;
  link: string;
  lightImage: string;  // 500x500px light theme banner
  darkImage: string;   // 500x500px dark theme banner
}

const { name, link, lightImage, darkImage } = Astro.props;
---

<div class="kubecon-banner">
  <a 
    href={link} 
    target="_blank" 
    rel="noopener noreferrer"
    class="banner-link"
    aria-label={`${name}`}
  >
    <picture>
      <source 
        srcset={darkImage} 
        media="(prefers-color-scheme: dark)"
      />
      <img 
        src={lightImage}
        alt={`${name} banner`}
        class="banner-image"
        loading="lazy"
      />
    </picture>
  </a>
</div>

<script>
  // Listen for theme changes and reload banner if needed
  // The picture element handles theme switching automatically via media queries
  const observer = new MutationObserver(() => {
    const theme = document.documentElement.getAttribute('data-theme');
    // Browser automatically selects correct source based on prefers-color-scheme
    // This observer is here for future enhancements if needed
  });
  
  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ['data-theme']
  });
</script>

<style>
  .kubecon-banner {
    margin-bottom: 1.5rem;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  
  .kubecon-banner:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }
  
  .banner-link {
    display: block;
    position: relative;
    text-decoration: none;
    overflow: hidden;
  }
  
  .banner-image {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
    aspect-ratio: 1 / 1; /* 500x500 square format */
  }
  
  /* Mobile responsiveness */
  @media (max-width: 768px) {
    .kubecon-banner {
      margin-bottom: 1rem;
    }
    
    .banner-image {
      aspect-ratio: 1 / 1; /* Maintain square on all screen sizes */
    }
  }
</style>
